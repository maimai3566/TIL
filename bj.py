# %% [markdown]ãƒ–ãƒ©ãƒƒã‚¯ã‚¸ãƒ£ãƒƒã‚¯(Gitã®ç·´ç¿’ã§ã™ï¼)
# # ãƒ–ãƒ©ãƒƒã‚¯ã‚¸ãƒ£ãƒƒã‚¯
# * ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã¨ãƒ‡ã‚£ãƒ¼ãƒ©ãƒ¼ã®1vs1ã§å¯¾æˆ¦
# * é…ã‚‰ã‚ŒãŸã‚«ãƒ¼ãƒ‰ã®åˆè¨ˆãŒ21ã«è¿‘ã„ã»ã†ãŒå‹ã¡ï¼ˆ21ã‚’è¶…ãˆã‚‹ã¨è² ã‘ç¢ºå®šï¼‰
# * ã‚«ãƒ¼ãƒ‰ã®ãƒã‚¤ãƒ³ãƒˆã¯ä»¥ä¸‹ã®é€šã‚Š  
#     * ã‚¨ãƒ¼ã‚¹ãƒ»ãƒ»ãƒ»1ã‹11  
#     * 2ï½10ãƒ»ãƒ»ãƒ»æ•°å­—ã®é€šã‚Š  
#     * 11ï½13ãƒ»ãƒ»ãƒ»10  
# * ãƒ«ãƒ¼ãƒ«
#     * ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ãŒæ›ã‘é‡‘ï¼ˆbetï¼‰ã‚’æ±ºã‚ã‚‰ã‚Œã‚‹
#     * ã‚²ãƒ¼ãƒ ã«å‹ã¤ã¨æ›ã‘é‡‘ã®2å€ã‚’è²°ãˆã‚‹ã€‚è² ã‘ã‚‹ã¨æ²¡å
#     * 21ã§å‹ã¤ã¨ã•ã‚‰ã«1.5å€è²°ãˆã‚‹
#     * å¼•ãåˆ†ã‘ã®å ´åˆã¯æ›ã‘é‡‘ãŒãã®ã¾ã¾æˆ»ã•ã‚Œã‚‹
# * ã‚²ãƒ¼ãƒ ã®æµã‚Œ
#     * æœ€åˆã«æ›é‡‘ï¼ˆbetï¼‰ã‚’ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ãŒæ±ºã‚ã‚‹
#     * ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã¨ãƒ‡ã‚£ãƒ¼ãƒ©ãƒ¼ãã‚Œãã‚Œã«2æšãšã¤ã‚«ãƒ¼ãƒ‰ãŒé…å¸ƒã•ã‚Œã‚‹
#     * ãƒ‡ã‚£ãƒ¼ãƒ©ãƒ¼ã®ã‚«ãƒ¼ãƒ‰ã¯1æšã ã‘è¦‹ãˆã¦ã„ã‚‹çŠ¶æ…‹
#     * ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã‚¿ãƒ¼ãƒ³
#         * ã‚¹ã‚¿ãƒ³ãƒ‰(ã“ã®æ‰‹ã§å‹è² )
#         * ãƒ’ãƒƒãƒˆï¼ˆã‚‚ã†1æšï¼‰â†’21ã‚’è¶…ãˆã‚‹ã¨ãƒã‚¹ãƒˆ
#         * ãƒ€ãƒ–ãƒ«ï¼ˆãƒ™ãƒƒãƒˆã—ãŸé‡‘é¡ã‚’2å€ã«ã—ã¦å‹è² ï¼‰
#         * ãƒãƒ¼ã‚¹ãƒˆï¼ˆè² ã‘ç¢ºï¼‰
#     * ãƒ‡ã‚£ãƒ¼ãƒ©ãƒ¼ã‚¿ãƒ¼ãƒ³
#         * æ‰‹æœ­ãŒ17ä»¥ä¸Šã®ã¨ããƒ»ãƒ»ãƒ»ã‚¹ã‚¿ãƒ³ãƒ‰
#         * æ‰‹æœ­ãŒ17ã«æº€ãŸãªã„ãƒ»ãƒ»ãƒ»ãƒ’ãƒƒãƒˆâ†’21ã‚’è¶…ãˆã‚‹ã¨ãƒã‚¹ãƒˆ
#     * ãƒ‡ã‚£ãƒ¼ãƒ©ãƒ¼ã®æ‰‹æœ­ã‚’ã‚ªãƒ¼ãƒ—ãƒ³ã—ã€å‹è² 

# %%ã€é–¢æ•°ã€‘ãƒ‡ãƒƒã‚­ã‚’ä½œã‚‹é–¢æ•°
import random
def make_deck():
    suits=['S','D','H','C']
    ranks=range(1,14)
    deck=[]
    deck=[(rank,suit) for rank in ranks for suit in suits]  #52æšã®ã‚«ãƒ¼ãƒ‰ã‚’ä½œã‚‹
    random.shuffle(deck)    #ã‚·ãƒ£ãƒƒãƒ•ãƒ«
    return deck

# %%æ‰‹æœ­ã‚’è¡¨ç¤ºã™ã‚‹é–¢æ•°
def print_hand(hand):
    for card in hand:
        print('[{} {}]'.format(card[1],card[0]))

# %%ã€é–¢æ•°ã€‘ã‚«ãƒ¼ãƒ‰ã®ç‚¹æ•°ã‚’è¨ˆç®—
def calk_point(hand):
    point=0 #åˆæœŸåŒ–
    #ã‚«ãƒ¼ãƒ‰ã‚’é™é †ã«ã—ã¦ã‹ã‚‰ãƒã‚¤ãƒ³ãƒˆè¨ˆç®—ï¼ˆ1ã‚’æœ€å¾Œã«è¨ˆç®—ã—ãŸã„ï¼‰
    for card in sorted(hand,reverse=True):
        ten=card[0]
        if ten>10:
            point+=10
        elif ten>=2 and ten<=10:
            point+=ten
        elif ten==1:
            if point<10:
                point+=11
            else:
                point+=1
    return point

# %%ã€é–¢æ•°ã€‘åˆ¤å®šã¨ç²¾ç®—
def hantei(p_point,d_point,bet,p_money):
    if p_point>21:
        if d_point>21:
            #ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã€ãƒ‡ã‚£ãƒ¼ãƒ©ãƒ¼ã¨ã‚‚ã«ãƒãƒ¼ã‚¹ãƒˆ
            print('ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼{}ç‚¹'.format(p_point)+' ãƒ‡ã‚£ãƒ¼ãƒ©ãƒ¼{}ç‚¹'.format(d_point)+' ã€äºŒäººã¨ã‚‚ãƒãƒ¼ã‚¹ãƒˆã€‘')
        else:
            #ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ãƒãƒ¼ã‚¹ãƒˆ
            print('ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼{}ç‚¹'.format(p_point)+' ãƒ‡ã‚£ãƒ¼ãƒ©ãƒ¼{}ç‚¹'.format(d_point)+' ã€ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ãƒãƒ¼ã‚¹ãƒˆè² ã‘ã€‘')
            bet=0
    elif p_point==d_point:
        #å¼•ãåˆ†ã‘
        print('ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼{}ç‚¹'.format(p_point)+' ãƒ‡ã‚£ãƒ¼ãƒ©ãƒ¼{}ç‚¹'.format(d_point)+' ã€å¼•ãåˆ†ã‘ã€‘')
    elif p_point<d_point:
        if d_point>21:
            #ãƒ‡ã‚£ãƒ¼ãƒ©ãƒ¼ãƒãƒ¼ã‚¹ãƒˆ
            print('ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼{}ç‚¹'.format(p_point)+' ãƒ‡ã‚£ãƒ¼ãƒ©ãƒ¼{}ç‚¹'.format(d_point)+' ã€ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®å‹ã¡ã€‘')
            bet*=2
        else:
            #è² ã‘
            print('ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼{}ç‚¹'.format(p_point)+' ãƒ‡ã‚£ãƒ¼ãƒ©ãƒ¼{}ç‚¹'.format(d_point)+' ã€ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®è² ã‘ã€‘')
            bet=0
    elif p_point>d_point:
        if p_point==21:
            print('ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼{}ç‚¹'.format(p_point)+' ãƒ‡ã‚£ãƒ¼ãƒ©ãƒ¼{}ç‚¹'.format(d_point)+' ã€ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ãƒ–ãƒ©ãƒƒã‚¯ã‚¸ãƒ£ãƒƒã‚¯ï¼ã€‘')
            bet*=2.5
        else:
            print('ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼{}ç‚¹'.format(p_point)+' ãƒ‡ã‚£ãƒ¼ãƒ©ãƒ¼{}ç‚¹'.format(d_point)+' ã€ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®å‹ã¡ã€‘')
            bet*=2
    p_money+=bet
    return p_money

# %%ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®ã‚¿ãƒ¼ãƒ³
def p_turn(deck,p_hand,bet,p_money):
    while True:
        try:
            ans=int(input('é¸æŠã—ã¦ã­ã€‚ã‚¹ã‚¿ãƒ³ãƒ‰ï¼1ã€€ãƒ’ãƒƒãƒˆï¼2ã€€ãƒ€ãƒ–ãƒ«ï¼3'))
            if ans==1:
                print('ã‚¹ã‚¿ãƒ³ãƒ‰')
                break
            elif ans==2:
                print('ãƒ’ãƒƒãƒˆ')
                #ã‚«ãƒ¼ãƒ‰ã‚’å¼•ã
                p_hand.append(deck.pop())
                #ã‚«ãƒ¼ãƒ‰ã‚’å¼•ã„ãŸã‚‰è¡¨ç¤º
                print_hand(p_hand)
                #ãƒã‚¤ãƒ³ãƒˆã‚’è¨ˆç®—ã—ã€21è¶…éã ã£ãŸã‚‰ã‚¿ãƒ¼ãƒ³çµ‚äº†
                p_point=calk_point(p_hand)
                if p_point>21:
                    break
            elif ans==3:
                print('ãƒ€ãƒ–ãƒ«')
                p_money-=bet
                bet*=2
                p_hand.append(deck.pop())
                print_hand(p_hand)
                break
            else:
                print('1ã€2ã€3ä»¥å¤–ã®æ•°å­—ã¯å…¥ã‚Œãªã„ã§ï¼ï¼ï¼ï¼')
                continue
        except: #æ–‡å­—åˆ—ã‚’å…¥ã‚ŒãŸã¨ãã®å‡¦ç†
            print('1ã€2ã€3ä»¥å¤–ã®æ•°å­—ã¯å…¥ã‚Œãªã„ã§ï¼ï¼ï¼ï¼')
            continue
    return bet,p_money


# %%ãƒ‡ã‚£ãƒ¼ãƒ©ãƒ¼ã®ã‚¿ãƒ¼ãƒ³
def d_turn(deck,d_hand):
    while True:
        d_point=calk_point(d_hand)
        if d_point>=17:
            break
        elif d_point<17:
            d_hand.append(deck.pop())
    return d_point

# %%ãƒ¡ã‚¤ãƒ³
#å¤‰æ•°åˆæœŸåŒ–
turn=0
p_money=100

#æ‰€æŒé‡‘ãŒ0å††ã‚ˆã‚Šå¤§ãã‘ã‚Œã°ã‚²ãƒ¼ãƒ ç¶šè¡Œã§ãã‚‹
while(p_money>0):
    #ã‚¿ãƒ¼ãƒ³
    turn+=1
    print('ã€{}ã‚¿ãƒ¼ãƒ³ç›®ã€‘æ‰€æŒé‡‘ï¼{}'.format(turn,p_money))
    #ãƒ‡ãƒƒã‚­ã‚’ä½œã‚‹
    deck=make_deck()

    p_hand,d_hand=[],[]
    p_point,d_point=0,0

    #ãƒ™ãƒƒãƒˆã™ã‚‹
    while True:
        try:
            bet=int(input('ãƒ™ãƒƒãƒˆã—ã¦ã­ğŸ’›'))
            #ãƒ™ãƒƒãƒˆãŒæ‰€æŒé‡‘ã‚ˆã‚Šå¤šã‹ã£ãŸã‚‰ãƒ«ãƒ¼ãƒ—
            if bet>p_money:
                print('æ‰€æŒé‡‘{}ã‚ˆã‚Šå¤šããƒ™ãƒƒãƒˆã§ããªã„ã‹ã‚‰ï¼'.format(bet))
                continue
            break
        except:
            print('betã¯æ•°å­—ã§ãªã„ã¨ãƒ€ãƒ¡ã ã‚ˆï¼')
            continue
    #æ‰€æŒé‡‘æ¸›ã‚‰ã™
    p_money-=bet

    #ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã‚«ãƒ¼ãƒ‰ã‚’2æšå¼•ã
    p_hand=[deck.pop() for x in range(2)]
    #ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®ã‚«ãƒ¼ãƒ‰ã‚’è¡¨ç¤º
    print_hand(p_hand)

    #ãƒ‡ã‚£ãƒ¼ãƒ©ãƒ¼ã®ã‚«ãƒ¼ãƒ‰ã‚’2æšå¼•ã
    d_hand.append(deck.pop())
    print('ãƒ‡ã‚£ãƒ¼ãƒ©ãƒ¼ã®ã‚«ãƒ¼ãƒ‰')
    print_hand(d_hand)  #1æšã ã‘è¡¨ç¤º
    d_hand.append(deck.pop())
    print('[* *]')

    #ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®ã‚¿ãƒ¼ãƒ³ï¼ˆè¡Œå‹•ã‚’æ±ºã‚ã‚‹ï¼‰
    print('â– ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼------------------')
    bet,p_money=p_turn(deck,p_hand,bet,p_money)
    p_point=calk_point(p_hand)
    print('{}ãƒã‚¤ãƒ³ãƒˆ'.format(p_point))

    #ãƒ‡ã‚£ãƒ¼ãƒ©ãƒ¼ã®ã‚¿ãƒ¼ãƒ³
    print('â– ãƒ‡ã‚£ãƒ¼ãƒ©ãƒ¼------------------')
    d_turn(deck,d_hand)
    d_point=calk_point(d_hand)
    print_hand(d_hand)
    print('{}ãƒã‚¤ãƒ³ãƒˆ'.format(d_point))
    print('-----------------------------------')

    #å‹è² ï¼
    p_money=hantei(p_point,d_point,bet,p_money)
    print('ç¾åœ¨ã®ãƒãƒãƒ¼{}'.format(p_money))

    #å‹è² ã‚’ç¶šã‘ã‚‹ã‹ã©ã†ã‹ã®ç¢ºèª
    ans=input('ã‚²ãƒ¼ãƒ ã‚’ç¶šã‘ã‚‹å ´åˆã¯[Y]ã€è¾ã‚ã‚‹å ´åˆã¯[N]ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚Y/Nï¼Ÿ')
    if ans.lower()=='y':
        continue
    else:
        print('ã‚²ãƒ¼ãƒ ã‚’çµ‚äº†ã—ã¾ã™ã€‚ã‚ãªãŸã®æ‰€æŒé‡‘ã¯{}å††ã§ã™â™ªã¾ãŸã‚²ãƒ¼ãƒ ã—ã¦ã­ğŸ’›'.format(p_money))
        break
